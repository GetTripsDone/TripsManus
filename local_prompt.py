import os
import sys

Daily_Plan_SysPrompt = """
** 角色设定 **
 你是一个专业的信息抽取专家，你需要从提供的信息中抽取出JSON格式的行程信息。

** 任务要求 **
 1. 深入的理解当前的行程规划
 2. 抽取完整的JSON结构

** JSON格式 **
 输出:
 {
    "day1": { #第一天的行程安排
        "title": "",      # 标题
        "topic": "",      # 主题
        "lodging": "",    # 住宿
        "restaurant": "", # 餐饮
        "travel_details":[
            {
                "time": "", # 时间
                "description": "", # 描述
            },
            ...
        ], # 行程详情
        "routes": [
            {
                "start": "", # 起点
                "end": "",   # 终点
                "Transportation": "", # 交通方式
            },
           ...
        ], # 路线规划，从行程详情中推理得到，你需要根据行程详情进行合理的推理
        # 注意！每个路线都需要包含起点和终点
        # 有些起点或者终点可能是酒店/餐馆，这时候你不需要提供对应的地点，而是提供描述
        # 如果起点或者终点，有多个候选的可选餐馆/酒店，合理的随机选择一个
    },
    ...
  }

** 注意事项 **
 1. 行程信息必须是完整的，不能有任何的缺失
 2. 行程信息必须是JSON格式
 3. 行程信息必须是符合要求的
 4. 合理的进行推理

** 示例 **
当前用户的输入为:
    三日深度游行程规划（河西走廊核心线）
    第一天：敦煌文化+沙漠奇观
    主题：佛教艺术与沙漠体验
    住宿：敦煌市区
    餐饮：敦煌市区（早/午/晚）
    时间	安排
    07:00-08:00	早餐（敦煌市区，推荐牛肉面、杏皮水）
    08:30-12:30	莫高窟（历史文化）<br>参观洞窟壁画，需提前预约门票。
    12:30-13:30	午餐（景区附近简餐或返回市区品尝驴肉黄面）
    14:00-17:30	鸣沙山月牙泉（自然风光）<br>骑骆驼、滑沙，傍晚光线适合摄影。
    18:00-19:00	晚餐（市区内，尝试敦煌酿皮、烤羊排）
    第二天：雄关漫道+丹霞日落
    主题：长城文化与地质奇观
    交通：高铁（敦煌→嘉峪关→张掖）
    住宿：张掖市区
    餐饮：嘉峪关市区（午）、张掖市区（晚）
    时间	安排
    07:00-07:30	早餐后退房，前往敦煌高铁站
    08:00-12:00	高铁前往嘉峪关（约4小时）
    12:00-13:00	午餐（嘉峪关市区，推荐羊肉垫卷子）
    13:30-16:00	嘉峪关关城（历史文化）<br>登城楼俯瞰戈壁，感受“天下第一雄关”气势。
    16:30-18:30	高铁前往张掖（约2小时）
    19:00-20:00	晚餐（张掖市区，推荐搓鱼面、炒拨拉）
    第三天：丹霞地貌+石窟探秘
    主题：自然奇观与民族风情
    住宿：张掖市区
    餐饮：丹霞景区附近（午）、张掖市区（晚）
    时间	安排
    07:00-07:30	早餐（张掖市区）
    08:00-12:00	张掖丹霞国家地质公园（自然风光）<br>清晨色彩最艳丽，适合航拍。
    12:30-13:30	午餐（景区附近农家菜或返回市区）
    14:00-17:00	马蹄寺（民俗风情）<br>探访悬崖石窟，体验裕固族文化。
    17:30-18:30	返回张掖市区，晚餐（推荐手抓羊肉、灰豆汤）
    行程亮点
    高效串联：敦煌→嘉峪关→张掖高铁直达，减少交通耗时。
    多元体验：涵盖佛教艺术（莫高窟）、长城文化（嘉峪关）、丹霞地貌（张掖）、民族风情（马蹄寺）。
    时间优化：每日安排避开正午高温（如鸣沙山下午游览），傍晚拍摄丹霞最佳光线。
    注意事项
    敦煌莫高窟需提前1个月预约门票。
    张掖丹霞建议清晨或傍晚游览，避免强光影响色彩效果。
    甘南地区（拉卜楞寺、桑科草原）因距离较远，建议单独规划3-4日行程。

输出的结果为：
{
    "day1": {
        "title": "敦煌文化+沙漠奇观",
        "topic": "佛教艺术与沙漠体验",
        "lodging": "敦煌市区",
        "restaurant": "敦煌市区（早/午/晚）",
        "travel_details": [
            {
                "time": "07:00-08:00",
                "description": "早餐（敦煌市区，推荐牛肉面、杏皮水）"
            },
            {
                "time": "08:30-12:30",
                "description": "莫高窟（历史文化）<br>参观洞窟壁画，需提前预约门票。"
            },
            {
                "time": "12:30-13:30",
                "description": "午餐（景区附近简餐或返回市区品尝驴肉黄面）"
            },
            {
                "time": "14:00-17:30",
                "description": "鸣沙山月牙泉（自然风光）<br>骑骆驼、滑沙，傍晚光线适合摄影。"
            },
            {
                "time": "18:00-19:00",
                "description": "晚餐（市区内，尝试敦煌酿皮、烤羊排）"
            }
        ],
        "routes": [
            {
                "start": "敦煌市区早餐店，(推荐牛肉面、杏皮水）",
                "end": "莫高窟",
                "Transportation": "汽车"
            },
            {
                "start": "莫高窟",
                "end": "午餐店（莫高窟景区附近简餐)",
                "Transportation": "汽车"
            },
            {
                "start": "午餐店（莫高窟景区附近简餐)",
                "end": "鸣沙山月牙泉",
                "Transportation": "汽车"
            },
            {
                "start": "鸣沙山月牙泉",
                "end": "晚餐店（敦煌市区内 尝试敦煌酿皮、烤羊排）",
                "Transportation": "汽车"
            }
        ]
    },
    "day2": {
        "title": "雄关漫道+丹霞日落",
        "topic": "长城文化与地质奇观",
        "lodging": "张掖市区",
        "restaurant": "嘉峪关市区（午）、张掖市区（晚）",
        "travel_details": [
            {
                "time": "07:00-07:30",
                "description": "早餐后退房，前往敦煌高铁站"
            },
            {
                "time": "08:00-12:00",
                "description": "高铁前往嘉峪关（约4小时）"
            },
            {
                "time": "12:00-13:00",
                "description": "午餐（嘉峪关市区，推荐羊肉垫卷子）"
            },
            {
                "time": "13:30-16:00",
                "description": "嘉峪关关城（历史文化）<br>登城楼俯瞰戈壁，感受“天下第一雄关”气势。"
            },
            {
                "time": "16:30-18:30",
                "description": "高铁前往张掖（约2小时）"
            },
            {
                "time": "19:00-20:00",
                "description": "晚餐（张掖市区，推荐搓鱼面、炒拨拉）"
            }
        ],
        "routes": [
            {
                "start": "敦煌市区早餐店",
                "end": "敦煌高铁站",
                "Transportation": "汽车"
            },
            {
                "start": "敦煌高铁站",
                "end": "嘉峪关",
                "Transportation": "高铁"
            },
            {
                "start": "午餐店（嘉峪关市区，推荐羊肉垫卷子）",
                "end": "嘉峪关关城",
                "Transportation": "汽车"
            },
            {
                "start": "嘉峪关关城",
                "end": "嘉峪关高铁站",
                "Transportation": "汽车"
            },
            {
                "start": "嘉峪关高铁站",
                "end": "张掖",
                "Transportation": "高铁"
            },
            {
                "start": "张掖高铁站",
                "end": "晚餐店（张掖市区，推荐搓鱼面、炒拨拉）",
                "Transportation": "汽车"
            }
        ]
    },
    "day3": {
        "title": "丹霞地貌+石窟探秘",
        "topic": "自然奇观与民族风情",
        "lodging": "张掖市区",
        "restaurant": "丹霞景区附近（午）、张掖市区（晚）",
        "travel_details": [
            {
                "time": "07:00-07:30",
                "description": "早餐（张掖市区）"
            },
            {
                "time": "08:00-12:00",
                "description": "张掖丹霞国家地质公园（自然风光）<br>清晨色彩最艳丽，适合航拍。"
            },
            {
                "time": "12:30-13:30",
                "description": "午餐（景区附近农家菜或返回市区）"
            },
            {
                "time": "14:00-17:00",
                "description": "马蹄寺（民俗风情）<br>探访悬崖石窟，体验裕固族文化。"
            },
            {
                "time": "17:30-18:30",
                "description": "返回张掖市区，晚餐（推荐手抓羊肉、灰豆汤）"
            }
        ],
        "routes": [
            {
                "start": "张掖市区早餐店",
                "end": "张掖丹霞国家地质公园",
                "Transportation": "汽车"
            },
            {
                "start": "张掖丹霞国家地质公园",
                "end": "午餐（张掖市区寻找）",
                "Transportation": "汽车"
            },
            {
                "start": "午餐（张掖市区寻找）",
                "end": "马蹄寺",
                "Transportation": "汽车"
            },
            {
                "start": "马蹄寺",
                "end": "张掖市区，晚餐（推荐手抓羊肉、灰豆汤）",
                "Transportation": "汽车"
            }
        ]
    }
}

"""

Daily_Plan_UserPrompt = """
当前用户的输入为:\n
"""

PROMPT_JSON = """任务背景：
你需要根据所给出的旅行地点详细信息，抽取出相应的关键信息，并整理成JSON的格式输出。

要求：
1. 输出结果必须是JSON格式的list，不要有任何其他内容
2. 你输出的list每个元素代表每个景点的信息，格式是字典，字典的字段为：景点名称、所在城市、景点介绍、预估游玩时长。整体的格式示例如下：[{"name1": "xxx", "city": "xxx", "description": "xxx", "duration": "xxx"}, {"name2": "xxx", "city": "xxx", "description": "xxx", "duration": "xxx"}, ...]
3. 预估游玩时长单位是小时，并且最小间隔是0.5。如果输入文本的预估游玩时长是范围，请取中间值
4. 你要抽取输入文本中的所有景点信息，不要有遗漏

示例case：
输入：
1.故宫博物院
 - 北京
 - 明清两代皇家宫殿建筑群，世界文化遗产
 - 预估游玩时长：3-4小时
2. 天坛公园
 - 北京
 - 明清皇帝祭天祈谷的祭坛建筑群
 - 预估游玩时长：2-3小时
3. 八达岭长城
 - 北京
 - 保存最完好的明长城精华段
 - 预估游玩时长：4-6小时

输出：
[{"name": "故宫博物院", "city": "北京", "description": "明清两代皇家宫殿建筑群，世界文化遗产", "duration": "3.5"}, {"name": "天坛公园", "city": "北京", "description": "明清皇帝祭天祈谷的祭坛建筑群", "duration": "2.5"}, {"name":"八达岭长城", "city": "北京", "description": "保存最完好的明长城精华段", "duration": "5"}]

接下来请你根据输入文本，按照上述要求和示例case，输出符合要求的JSON格式的list。
输入：
"""

mock_input_text = """# 自然风光
1. 张掖丹霞国家地质公园
   - 所在地点：张掖市临泽县和肃南县
   - 景点介绍：以其色彩斑斓的丹霞地貌著称，是摄影爱好者的天堂。
   - 预估游玩时长：3-4小时

2. 鸣沙山月牙泉
   - 所在地点：敦煌市
   - 景点介绍：沙漠与清泉共存的奇观，可以体验骑骆驼和滑沙。
   - 预估游玩时长：2-3小时

3. 麦积山石窟
   - 所在地点：天水市麦积区
   - 景点介绍：以精美的泥塑艺术闻名，是中国四大石窟之一。
   - 预估游玩时长：2-3小时

# 历史文化
1. 莫高窟
   - 所在地点：敦煌市
   - 景点介绍：世界文化遗产，拥有丰富的佛教艺术壁画和雕塑。
   - 预估游玩时长：3-4小时

2. 嘉峪关关城
   - 所在地点：嘉峪关市
   - 景点介绍：明代万里长城的西端起点，被誉为“天下第一雄关”。
   - 预估游玩时长：2-3小时

3. 拉卜楞寺
   - 所在地点：甘南藏族自治州夏河县
   - 景点介绍：藏传佛教格鲁派六大寺院之一，拥有丰富的宗教文化和建筑艺术。
   - 预估游玩时长：2-3小时

# 民俗风情
1. 郎木寺
   - 所在地点：甘南藏族自治州碌曲县
   - 景点介绍：藏传佛教寺院，周围风景优美，是体验藏族文化的好去处。
   - 预估游玩时长：2-3小时

2. 夏河桑科草原
   - 所在地点：甘南藏族自治州夏河县
   - 景点介绍：广阔的草原风光，可以体验骑马和藏族民俗活动。
   - 预估游玩时长：3-4小时

3. 临夏八坊十三巷
   - 所在地点：临夏回族自治州临夏市
   - 景点介绍：回族文化街区，充满了浓郁的民族风情和历史文化。
   - 预估游玩时长：2-3小时

# 其他推荐
1. 黄河石林
   - 所在地点：白银市景泰县
   - 景点介绍：以奇特的石林地貌和黄河风光相结合，景色壮丽。
   - 预估游玩时长：3-4小时

2. 崆峒山
   - 所在地点：平凉市崆峒区
   - 景点介绍：道教名山，风景秀丽，文化底蕴深厚。
   - 预估游玩时长：3-4小时

3. 马蹄寺
   - 所在地点：张掖市肃南裕固族自治县
   - 景点介绍：集石窟艺术、祁连山风光和裕固族风情于一体的旅游景区。
   - 预估游玩时长：2-3小时
"""


PROMPT_COMBINE = """任务背景：
请你把输入的每日行程安排simplify_plan和景点信息poi_info_list进行整合，生成一个完整的行程安排，格式为JSON。

要求：
1. 你需要把poi_info_list中每个景点的信息坐标信息location整合到simplify_plan中，确保每个景点都有对应的详细信息。
2. simplify_plan中key为每一天，value为当天所有的路线list，每个元素是每一段路线，包含start、end、Transportation
3. 你生成的json格式应为{"day1": [{"start": "xxx", "end": "xxx", "Transportation": "xxx", "location": "xxx", }, {"start": "xxx", "end": "xxx", "Transportation": "xxx", "location": "xxx",}], "day2": [{"start": "xxx", "end": "xxx", "Transportation": "xxx", "location": "xxx", }, {"start": "xxx", "end": "xxx", "Transportation": "xxx", "location": "xxx",}], ...}

"""
